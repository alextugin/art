(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{181:function(e,n,r){"use strict";r.d(n,"a",(function(){return o}));r(182),r(175),r(178),r(113),r(177);var t=r(165),o=function(e){t.m.call(this,e),this.type=t.Jb};o.prototype=Object.assign(Object.create(t.m.prototype),{constructor:o,parse:function(e){var n=function(e,n){switch(e){case 1:console.error("RGBELoader Read Error: "+(n||""));break;case 2:console.error("RGBELoader Write Error: "+(n||""));break;case 3:console.error("RGBELoader Bad File Format: "+(n||""));break;default:case 4:console.error("RGBELoader: Error: "+(n||""))}return-1},r=function(e,n,r){n=n||1024;for(var p=e.pos,i=-1,t=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(p,p+128)));0>(i=o.indexOf("\n"))&&t<n&&p<e.byteLength;)s+=o,t+=o.length,p+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(p,p+128)));return-1<i&&(!1!==r&&(e.pos+=t+i+1),s+o.slice(0,i))},o=function(){var e=new Float32Array(1),n=new Int32Array(e.buffer);function r(r){e[0]=r;var t=n[0],o=t>>16&32768,l=t>>12&2047,c=t>>23&255;return c<103?o:c>142?(o|=31744,o|=(255==c?0:1)&&8388607&t):c<113?o|=((l|=2048)>>114-c)+(l>>113-c&1):(o|=c-112<<10|l>>1,o+=1&l)}return function(e,n,t,o){var l=e[n+3],c=Math.pow(2,l-128)/255;t[o+0]=r(e[n+0]*c),t[o+1]=r(e[n+1]*c),t[o+2]=r(e[n+2]*c)}}(),l=new Uint8Array(e);l.pos=0;var c,d,h,v,f,m,w=function(e){var line,t,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,c=/^\s*FORMAT=(\S+)\s*$/,d=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,header={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(line=r(e)))return n(1,"no header found");if(!(t=line.match(/^#\?(\S+)$/)))return n(3,"bad initial token");for(header.valid|=1,header.programtype=t[1],header.string+=line+"\n";!1!==(line=r(e));)if(header.string+=line+"\n","#"!==line.charAt(0)){if((t=line.match(o))&&(header.gamma=parseFloat(t[1],10)),(t=line.match(l))&&(header.exposure=parseFloat(t[1],10)),(t=line.match(c))&&(header.valid|=2,header.format=t[1]),(t=line.match(d))&&(header.valid|=4,header.height=parseInt(t[1],10),header.width=parseInt(t[2],10)),2&header.valid&&4&header.valid)break}else header.comments+=line+"\n";return 2&header.valid?4&header.valid?header:n(3,"missing image size specifier"):n(3,"missing format specifier")}(l);if(-1!==w){var y=w.width,M=w.height,x=function(e,r,t){var o,l,c,d,h,v,f,m,i,w,y,M,x,E=r,T=t;if(E<8||E>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(E!==(e[2]<<8|e[3]))return n(3,"wrong scanline width");if(!(o=new Uint8Array(4*r*t)).length)return n(4,"unable to allocate buffer space");for(l=0,c=0,m=4*E,x=new Uint8Array(4),v=new Uint8Array(m);T>0&&c<e.byteLength;){if(c+4>e.byteLength)return n(1);if(x[0]=e[c++],x[1]=e[c++],x[2]=e[c++],x[3]=e[c++],2!=x[0]||2!=x[1]||(x[2]<<8|x[3])!=E)return n(3,"bad rgbe scanline format");for(f=0;f<m&&c<e.byteLength;){if((M=(d=e[c++])>128)&&(d-=128),0===d||f+d>m)return n(3,"bad scanline data");if(M)for(h=e[c++],i=0;i<d;i++)v[f++]=h;else v.set(e.subarray(c,c+d),f),f+=d,c+=d}for(w=E,i=0;i<w;i++)y=0,o[l]=v[i+y],y+=E,o[l+1]=v[i+y],y+=E,o[l+2]=v[i+y],y+=E,o[l+3]=v[i+y],l+=4;T--}return o}(l.subarray(l.pos),y,M);if(-1!==x){switch(this.type){case t.Jb:var data=x,E=t.rb,T=t.Jb;break;case t.t:for(var R=x.length/4*3,U=new Float32Array(R),A=0;A<R;A++)h=U,v=3*A,f=void 0,m=void 0,f=(c=x)[(d=4*A)+3],m=Math.pow(2,f-128)/255,h[v+0]=c[d+0]*m,h[v+1]=c[d+1]*m,h[v+2]=c[d+2]*m;data=U,E=t.sb,T=t.t;break;case t.x:R=x.length/4*3;var F=new Uint16Array(R);for(A=0;A<R;A++)o(x,4*A,F,3*A);data=F,E=t.sb,T=t.x;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:y,height:M,data:data,header:w.string,gamma:w.gamma,exposure:w.exposure,format:E,type:T}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,n,r,o){return t.m.prototype.load.call(this,e,(function(e,r){switch(e.type){case t.Jb:e.encoding=t.qb,e.minFilter=t.X,e.magFilter=t.X,e.generateMipmaps=!1,e.flipY=!0;break;case t.t:case t.x:e.encoding=t.H,e.minFilter=t.I,e.magFilter=t.I,e.generateMipmaps=!1,e.flipY=!0}n&&n(e,r)}),r,o)}})},182:function(e,n,r){r(166)("Int32",4,(function(e){return function(data,n,r){return e(this,data,n,r)}}))},223:function(e,n,r){"use strict";r.r(n);var t,o=r(165),l=r(167),c=r(168),d=(r(169),r(181)),h=((t=new o.tb({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new o.Kb(1,1)}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4( position, 1.0 );\n}\n            ",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec2 vUv;\nuniform sampler2D roughnessMap;\nuniform sampler2D normalMap;\nuniform vec2 texelSize;\n\n#define ENVMAP_TYPE_CUBE_UV\nvec4 envMapTexelToLinear(vec4 a){return a;}\n#include <cube_uv_reflection_fragment>\n\nfloat roughnessToVariance(float roughness) {\nfloat variance = 0.0;\nif (roughness >= r1) {\n  variance = (r0 - roughness) * (v1 - v0) / (r0 - r1) + v0;\n} else if (roughness >= r4) {\n  variance = (r1 - roughness) * (v4 - v1) / (r1 - r4) + v1;\n} else if (roughness >= r5) {\n  variance = (r4 - roughness) * (v5 - v4) / (r4 - r5) + v4;\n} else {\n  float roughness2 = roughness * roughness;\n  variance = 1.79 * roughness2 * roughness2;\n}\nreturn variance;\n}\nfloat varianceToRoughness(float variance) {\nfloat roughness = 0.0;\nif (variance >= v1) {\n  roughness = (v0 - variance) * (r1 - r0) / (v0 - v1) + r0;\n} else if (variance >= v4) {\n  roughness = (v1 - variance) * (r4 - r1) / (v1 - v4) + r1;\n} else if (variance >= v5) {\n  roughness = (v4 - variance) * (r5 - r4) / (v4 - v5) + r4;\n} else {\n  roughness = pow(0.559 * variance, 0.25);// 0.559 = 1.0 / 1.79\n}\nreturn roughness;\n}\n\nvoid main() {\n  gl_FragColor = texture2D(roughnessMap, vUv, -1.0);\n  if (texelSize.x == 0.0) return;\n  float roughness = gl_FragColor.g;\n  float variance = roughnessToVariance(roughness);\n  vec3 avgNormal;\n  for (float x = -1.0; x < 2.0; x += 2.0) {\n  for (float y = -1.0; y < 2.0; y += 2.0) {\n      vec2 uv = vUv + vec2(x, y) * 0.25 * texelSize;\n      avgNormal += normalize(texture2D(normalMap, uv, -1.0).xyz - 0.5);\n  }\n  }\n  variance += 1.0 - 0.25 * length(avgNormal);\n  gl_FragColor.g = varianceToRoughness(variance);\n}\n",blending:o.ab,depthTest:!1,depthWrite:!1})).type="RoughnessMipmapper",t),v=new o.S(new o.hb(2,2),h),f=new o.eb(0,1,0,1,0,1),m=null,w=null;function y(e){(w=e).compile(v,f)}y.prototype={constructor:y,generateMipmaps:function(e){var n=e.roughnessMap,r=e.normalMap;if(null!=n&&null!=r&&n.generateMipmaps&&!e.userData.roughnessUpdated){e.userData.roughnessUpdated=!0;var t=Math.max(n.image.width,r.image.width),l=Math.max(n.image.height,r.image.height);if(o.Q.isPowerOfTwo(t)&&o.Q.isPowerOfTwo(l)){var c=w.getRenderTarget(),d=w.autoClear;if(w.autoClear=!1,null!=m&&m.width===t&&m.height===l||(null!=m&&m.dispose(),(m=new o.Ob(t,l,{depthBuffer:!1,stencilBuffer:!1})).scissorTest=!0),t!==n.image.width||l!==n.image.height){var y=new o.Ob(t,l,{minFilter:o.J,depthBuffer:!1,stencilBuffer:!1});y.texture.generateMipmaps=!0,w.setRenderTarget(y),e.roughnessMap=y.texture,e.metalnessMap==n&&(e.metalnessMap=e.roughnessMap),e.aoMap==n&&(e.aoMap=e.roughnessMap)}h.uniforms.roughnessMap.value=n,h.uniforms.normalMap.value=r;for(var M=new o.Kb(0,0),x=h.uniforms.texelSize.value,E=0;t>=1&&l>=1;++E,t/=2,l/=2)x.set(1/t,1/l),0==E&&x.set(0,0),m.viewport.set(M.x,M.y,t,l),m.scissor.set(M.x,M.y,t,l),w.setRenderTarget(m),w.render(v,f),w.copyFramebufferToTexture(M,e.roughnessMap,E),h.uniforms.roughnessMap.value=e.roughnessMap;n!==e.roughnessMap&&n.dispose(),w.setRenderTarget(c),w.autoClear=d}}},dispose:function(){h.dispose(),v.geometry.dispose(),null!=m&&m.dispose()}};var M={mounted:function(){var e,n,r,t,h,v;function f(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight),m()}function m(){t.render(r,n)}!function(){v=document.createElement("div"),(n=new o.gb(45,window.innerWidth/window.innerHeight,.25,20)).position.set(-1.8,.6,2.7),r=new o.wb,h=new o.b(0,5.3),r.add(h),(new d.a).setDataType(o.Jb).setPath("/texture/").load("DH110LL.hdr",(function(e){var n=w.fromEquirectangular(e).texture;r.background=n,r.environment=n,e.dispose(),w.dispose(),m();var o=new y(t);(new l.a).setPath("/model/").load("forest.glb",(function(e){e.scene.traverse((function(e){e.isMesh&&o.generateMipmaps(e.material)})),r.add(e.scene),o.dispose(),m()}))})),(t=new o.Pb({antialias:!0})).setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),t.toneMapping=o.a,t.toneMappingExposure=.8,t.outputEncoding=o.Qb,v.appendChild(t.domElement);var w=new o.fb(t);w.compileEquirectangularShader(),(e=new c.a(n,t.domElement)).addEventListener("change",m),e.minDistance=2,e.maxDistance=10,e.target.set(0,0,-.2),e.update(),window.addEventListener("resize",f,!1)}(),m(),(v=this.$el).appendChild(t.domElement)}},x=r(7),component=Object(x.a)(M,(function(){var e=this.$createElement;return(this._self._c||e)("div",{})}),[],!1,null,null,null);n.default=component.exports}}]);